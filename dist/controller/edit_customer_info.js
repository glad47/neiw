/** layuiAdmin.pro-v1.0.0 LPPL License By http://www.layui.com/admin/ */
 ;"use strict";layui.define(["admin","form","edit_customer_addAddr"],function(e){var t=layui.jquery,r=layui.admin;customerAddAddr=layui.edit_customer_addAddr;var i={editInfo:function(e){var i=e.reTab;r.popup({title:"编辑客户",area:["60%","100%"],id:"LAY-popup-customer-edit",btn:["提交","取消"],yes:function(e,r){t("#layuiadmin-app-form-submit").click()},btn2:function(){localStorage.getItem("receiverAddersEntityList")&&layer.confirm("地址尚未更新保存，确定返回?",function(){console.log("清除地址缓存"),localStorage.removeItem("receiverAddersEntityList"),layer.closeAll()},function(){return!1})},btn3:function(){t(".edit-cusInfo input").each(function(e){t(this).removeAttr("lay-verify")})},end:function(){},success:function(t,o){view(this.id).render("/infoManagement/iframeWindow/customer_edit_info",e).done(function(){form.render(null,"customer-add-edit-form-list");var e;form.on("switch(optionUser)",function(t){console.log(t.field),1==t.elem.checked?(layer.msg("已启用"),e=0):(layer.msg("停用"),e=1)});var t;form.on("switch(isneibuUser)",function(e){1==e.elem.checked?(layer.msg("内部用户"),t=1):(layer.msg("客户系统用户"),t=0)});var n=0;form.on("switch(deliveryReport)",function(e){1==e.elem.checked?(layer.msg("需要出货报告"),n=1):(layer.msg("不需要出货报告"),n=0)});var a;form.on("switch(isAuditMark)",function(e){1==e.elem.checked?(layer.msg("需要审核"),a=0):(layer.msg("不需审核"),a=1)});var c;form.on("switch(productionVerification)",function(e){1==e.elem.checked?(layer.msg("需要确定生产资料"),c=1):(layer.msg("不需要确定生产资料"),c=0)}),form.on("submit(layuiadmin-app-form-submit)",function(s){var d=s.field;d.invalidMark=e,d.userType=t,d.auditMark=a,d.deliveryReport=n,d.productionVerification=c;var l=localStorage.getItem("receiverAddersEntityList");l&&(l=JSON.parse(l),l.reduce(function(e,t){return delete t.id,"on"==t.isDefault&&(t.isDefault=1),e},0),d.receiverAddersEntityList=l),console.log(d),r.req({url:setter.baseUrl+"sys/consumer/user/update",type:"POST",contentType:"application/json;charset=utf-8",data:JSON.stringify(d),success:function(e){layui.table.reload(i),layer.close(o)}})}),form.on("select(ssdz)",function(e){var t=e.value;"addAddr"===t&&customerAddAddr.addAddr({title:"添加",data:{}});var r=localStorage.getItem("receiverAddersEntityList");layer.msg(t),console.log(t),r&&(r=JSON.parse(r),r.reduce(function(e,r){return r.id==t&&(console.log(r),r.isDefault=1),e},[]),localStorage.setItem("receiverAddersEntityList",JSON.stringify(r)))})})}})}};e("edit_customer_info",i)});