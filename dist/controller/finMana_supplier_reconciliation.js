/** layuiAdmin.pro-v1.0.0 LPPL License By http://www.layui.com/admin/ */
 ;"use strict";function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}layui.define(["admin","table","index","element","form","laydate"],function(e){var t;table=layui.table,view=layui.view,admin=layui.admin,form=layui.form,setter=layui.setter,element=layui.element;var i=layui.jquery;element.on("tab(tab-quotationToger)",function(e){console.log(e.index),0===e.index||1===e.index||2===e.index}),table.render({elem:"#finManaSupRe_tabPcb",url:setter.baseUrl+"fms/reconciliation/list",toolbar:"#finManaSupRe_tb",cellMinWidth:80,id:"finManaSupRe_tabPcb",page:!0,parseData:function(e){return{code:0,data:e.page.list,count:e.page.totalCount}},cols:[[{type:"checkbox"},(t={field:"status",title:"状态",templet:"#pcb",width:115},_defineProperty(t,"templet",'<div>{{ d.status == 4 ? "待确认交期" : "" }}</div>'),_defineProperty(t,"sort",!0),t),{field:"gmtCreate",title:"报价时间",width:166,sort:!0},{field:"reconciliationNo",title:"对账编号",width:210,sort:!0},{field:"supplierNo",title:"供应商编号",width:124,sort:!0},{field:"factoryMake",title:"供应商厂编",width:117,sort:!0},{field:"productNo",title:"聚谷型号",width:124,sort:!0},{field:"pcbName",title:"聚谷物料号",width:144,sort:!0},{field:"quantityPcs",title:"订单数量(PCS)",width:134,sort:!0},{field:"unitPrice",title:"单价",width:96,sort:!0},{field:"subtotal",title:"合计",width:96,sort:!0},{field:"remark",title:"订单备注",width:168,sort:!0},{fixed:"right",title:"操作",toolbar:"#finManaSupRe_tbar",width:150}]],done:function(e,t,i){}}),table.on("toolbar(finManaSupRe_tabPcb)",function(e){var t=table.checkStatus(e.config.id);if("submit"===e.event){var i=t.data;i.length<1?layer.msg("最少选择一条数据！"):layer.confirm("确认提交？",function(e){var t=i.map(function(e){return e.reconciliationNo}).join(",");admin.req({type:"post",data:{reconciliationId:t},url:setter.baseUrl+"fms/reconciliation/supplierReconciliation",success:function(t){if("500"!=t.code){layer.alert("提交成功！！");setTimeout(function(){table.reload("finManaSupRe_tabPcb"),layer.close(e)},1200)}}})})}}),table.on("tool(finManaSupRe_tabPcb)",function(e){var t=e.data;"edit"==e.event?(layer.msg("编辑操作"),admin.popup({title:"订单协同编辑",area:["434px","448px"],btn:["保存","取消"],yes:function(e,t){layer.msg("提交信息"),i(".otEdit").click()},success:function(e,i){var a=t.id,n=t.supplierId,r=t.orderId;view(this.id).render("sqeManagement/iframeWindow/order_together_edit",t).done(function(){form.on("submit(otEdit)",function(e){var t=e.field;return t.id=a,t.orderId=r,t.supplierId=n,console.log(t),admin.req({type:"post",data:t,url:setter.baseUrl+"scm/ordersupplier/update",success:function(e){layer.alert("订单协同修改成功"),table.reload("finManaSupRe_tabPcb"),layer.close(i)}}),!1})})}})):"search"==e.event&&layer.msg("查看订单协同")}),e("finMana_supplier_reconciliation",{})});