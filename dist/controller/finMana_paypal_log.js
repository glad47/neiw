/** layuiAdmin.pro-v1.0.0 LPPL License By http://www.layui.com/admin/ */
 ;"use strict";layui.define(["admin","table","index","element","form","laydate"],function(a){table=layui.table,view=layui.view,admin=layui.admin,form=layui.form,setter=layui.setter,element=layui.element,$=layui.jquery,table.render({elem:"#finManaPaypalLog_tabPcb",url:setter.baseUrl+"paypal/paylog/list",toolbar:"#finManaPaypalLog_toolbar",cellMinWidth:80,id:"finManaPaypalLog_tabPcb",page:!0,parseData:function(a){return{code:0,data:a.page.list,count:a.page.totalCount}},cols:[[{field:"id",title:"id",width:124,sort:!0},{field:"txnId",title:"交易id",width:180,sort:!0},{field:"businessName",title:"跟单员名",width:150,sort:!0},{field:"paymentDate",title:"付款时间",width:210,sort:!0},{field:"payerEmail",title:"付款人email",width:250,sort:!0},{field:"firstName",title:"付款人姓",width:117,sort:!0},{field:"lastName",title:"付款人名",width:144,sort:!0},{field:"currency",title:"币种",width:100,sort:!0},{field:"mcGross",title:"交易金额",width:144,sort:!0},{field:"paymentFee",title:"payPal 手续费",width:144,sort:!0},{field:"totalNet",title:"总净额",width:144,sort:!0},{field:"custom",title:"绑定信息",width:250,sort:!0},{title:"操作",width:160,align:"center",fixed:"right",toolbar:"#finManaPaypalLog_tbar"}]],done:function(a,e,t){}}),table.on("tool(finManaPaypalLog_tabPcb)",function(a){var e=a.data;console.log(e),"paypal_binding_order"===a.event?admin.popup({title:"绑定订单信息",shadeClose:!0,shade:!1,maxmin:!0,btn:["提交","取消"],yes:function(){$("#paypalLogBindingOrderSubmit").click()},area:["766px","510px"],success:function(a,t){view(this.id).render("/finManagement/paypal_binding_order").done(function(){form.render(null,"paypal_log_binding_order_form"),form.on("submit(LAY-paypal-log-binding-order-submit)",function(a){var i=a.field;return i.id=e.id,i.payTime=e.paymentDate,console.log(i),admin.req({type:"post",url:setter.baseUrl+"paypal/paylog/bindingOrder",data:i,done:function(a){console.log(a),layer.msg("绑定成功"),layui.table.reload("finManaPaypalLog_tabPcb")},fail:function(a){layer.msg("绑定失败")}}),layer.close(t),!1})})}}):"paypal_update"===a.event&&admin.popup({title:"修改支付记录",shadeClose:!0,shade:!1,maxmin:!0,area:["55%","75%"],btn:["立即提交","取消"],yes:function(){$("#paypalLogSubmit").click()},id:"fin_paypal_add",success:function(a,t){view(this.id).render("/finManagement/paypal_add_edit",e).done(function(){form.render(null,"paypal_log_add_edit_form"),form.on("submit(LAY-paypal-log-submit)",function(a){var i=a.field;return i.id=e.id,admin.req({type:"post",url:setter.baseUrl+"paypal/paylog/update",data:i,done:function(a){layer.msg("修改成功"),layui.table.reload("finManaPaypalLog_tabPcb")},fail:function(a){layer.msg("修改失败")}}),layer.close(t),!1})})}})}),table.on("toolbar(finManaPaypalLog_tabPcb)",function(a){table.checkStatus(a.config.id);"evPaypalAdd"===a.event&&admin.popup({title:"添加支付记录",shadeClose:!0,shade:!1,maxmin:!0,area:["55%","75%"],btn:["立即提交","取消"],yes:function(){$("#paypalLogSubmit").click()},id:"fin_paypal_add",success:function(a,e){view(this.id).render("/finManagement/paypal_add_edit").done(function(){form.render(null,"paypal_log_add_edit_form"),form.on("submit(LAY-paypal-log-submit)",function(a){var t=a.field;return admin.req({type:"post",url:setter.baseUrl+"paypal/paylog/save",data:t,done:function(a){layer.msg("添加成功"),layui.table.reload("finManaPaypalLog_tabPcb")},fail:function(a){layer.msg("添加失败")}}),layer.close(e),!1})})}})}),form.on("submit(paypalLog-search)",function(a){var e=a.field;table.reload("finManaPaypalLog_tabPcb",{where:e})}),$(".paypal-form-search input").bind("input propertychange",function(a){$("*[lay-filter='paypalLog-search']").click()}),$(".layui-btn").on("click",function(){var a=$(this).data("type");active[a]&&active[a].call(this)}),a("finMana_paypal_log",{})});