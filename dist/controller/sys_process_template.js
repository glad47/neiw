/** layuiAdmin.pro-v1.0.0 LPPL License By http://www.layui.com/admin/ */
 ;"use strict";function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}layui.define(["admin","table","setter","form","jquery"],function(e){var t,i=layui.jquery,a=layui.table,n=layui.admin,l=layui.setter,o=layui.view,s=layui.form;s.render(null,"app-content-comment"),a.render({elem:"#process_template_listTab",url:l.baseUrl+"epc/processtemplate/list",parseData:function(e){return{code:0,data:e.page.list,count:e.page.totalCount}},cols:[[{type:"checkbox",fixed:"left",width:50},{field:"id",minWidth:80,title:"ID",align:"center"},{field:"processTemplateName",minWidth:80,title:"流程模板名称",align:"center"},{field:"processIds",minWidth:80,title:"流程ids",align:"center"},(t={width:200,align:"center"},_defineProperty(t,"align","center"),_defineProperty(t,"fixed","right"),_defineProperty(t,"toolbar","#dept-table-operate-barDemo"),_defineProperty(t,"title","操作"),t)]],page:!0}),a.on("tool(process_template_listTab)",function(e){var t=e.data;console.log(t),"edit"===e.event?n.popup({title:"编辑工序流程",area:["550px","550px"],id:"LAY-popup-dept-edit",btn:["提交","取消"],yes:function(e,t){i("#layuiadmin-app-form-submit").click()},end:function(){},success:function(e,a){o(this.id).render("infoManagement/process_templateform",t).done(function(){s.on("submit(layuiadmin-app-form-submit)",function(e){var t=e.field,o="";i("input[name='pids']:checked").each(function(){o+=i(this).val()+","}),""!=o&&(o=o.substring(0,o.length-1),t.processIds=o),console.log(t),n.req({url:l.baseUrl+"epc/processtemplate/update",type:"POST",data:t,success:function(e){layui.table.reload("process_template_listTab"),layer.close(a)}})})})}}):"del"===e.event&&layer.confirm("确定删除此模板？",function(e){n.req({url:l.baseUrl+"epc/processtemplate/delete",type:"POST",data:{ids:t.id},success:function(e){layui.table.reload("process_template_listTab"),layer.msg("已删除")}})})});var i=layui.$,r={dept_add:function(e){n.popup({title:"添加工序流程",area:["550px","550px"],btn:["提交","取消"],yes:function(e,t){i("#layuiadmin-app-form-submit").click()},btn2:function(e,t){},end:function(){clickTr={}},id:"LAY-popup-dept-add",success:function(e,t){o(this.id).render("infoManagement/process_templateform").done(function(){s.render(null,"layuiadmin-app-form-list"),s.on("submit(layuiadmin-app-form-submit)",function(e){var a=e.field;console.log(a);var o="";i("input[name='pids']:checked").each(function(){o+=i(this).val()+","}),""!=o&&(o=o.substring(0,o.length-1),a.processIds=o),console.log(a),n.req({url:l.baseUrl+"epc/processtemplate/save",type:"POST",data:a,success:function(e){console.log(e),layui.table.reload("process_template_listTab"),layer.close(t)}})})})}})}};i(".test-table-operate-btn .layui-btn").on("click",function(){var e=i(this).data("type");r[e]?r[e].call(this):""}),e("sys_process_template",{})});