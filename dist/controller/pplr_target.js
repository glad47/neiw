/** layuiAdmin.pro-v1.0.0 LPPL License By http://www.layui.com/admin/ */
 ;"use strict";function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}layui.define(["admin","table","setter","form","jquery"],function(e){var t,a=layui.jquery,i=layui.table,r=layui.admin,n=layui.setter,l=layui.view,s=layui.form;s.on("submit(plrTargerSet-search)",function(e){var t=e.field;console.log(t),i.reload("pplr_targetListTab",{where:t})}),a(".pplrTargetSet-form-search input").bind("input propertychange",function(e){a("*[lay-filter='plrTargerSet-search']").click()}),s.on("select(pplrTargetSet-dateType-sel)",function(e){a("*[lay-filter='plrTargerSet-search']").click()}),s.on("select(pplrTargetSet-type-sel)",function(e){a("*[lay-filter='plrTargerSet-search']").click()}),i.render({elem:"#pplr_targetListTab",url:n.baseUrl+"pplr/businesstarget/list",cols:[[{field:"id",minWidth:80,title:"ID",align:"center"},{field:"businessName",minWidth:80,title:"跟单员",align:"center"},{field:"name",minWidth:80,title:"目标名称",align:"center"},{field:"dateType",minWidth:80,title:"时间类型",align:"center",templet:"#target_dataType_temple"},{field:"type",minWidth:80,title:"目标类型",align:"center",templet:"#target_type_temple"},{field:"value",minWidth:80,title:"目标指标",align:"center"},(t={width:200,align:"center"},_defineProperty(t,"align","center"),_defineProperty(t,"fixed","right"),_defineProperty(t,"toolbar","#target-table-operate-barDemo"),_defineProperty(t,"title","操作"),t)]],page:!0,parseData:function(e){return{code:0,data:e.page.list,count:e.page.totalCount}}}),i.on("tool(pplr_targetListTab)",function(e){var t=e.data;console.log(t),"target_edit"===e.event?r.popup({title:"编辑目标",area:["550px","550px"],id:"LAY-pplr-target-edit",btn:["提交","取消"],yes:function(e,t){a("#layuiadmin-app-form-submit").click()},end:function(){},success:function(e,i){l(this.id).render("infoManagement/pplr_targetSet_form",t).done(function(){var e;s.on("select(rsf_business)",function(t){e=a(t.elem).find("option:selected").attr("data-name")}),s.on("submit(layuiadmin-app-form-submit)",function(t){var a=t.field;a.businessName=e,r.req({url:n.baseUrl+"pplr/businesstarget/update",type:"POST",data:a,success:function(e){layui.table.reload("pplr_targetListTab"),layer.close(i)}})})})}}):"target_del"===e.event&&layer.confirm("确定删除此目标？",function(e){r.req({url:n.baseUrl+"pplr/businesstarget/delete",type:"POST",data:{ids:t.id},success:function(e){layui.table.reload("pplr_targetListTab"),layer.msg("已删除")}})})});var a=layui.$,p={target_add:function(e){r.popup({title:"添加目标",area:["550px","550px"],btn:["提交","取消"],yes:function(e,t){a("#layuiadmin-app-form-submit").click()},btn2:function(e,t){},end:function(){clickTr={}},id:"LAY-pplr-target-add",success:function(e,t){l(this.id).render("infoManagement/pplr_targetSet_form").done(function(){s.render(null,"layuiadmin-app-form-list");var e;s.on("select(rsf_business)",function(t){e=a(t.elem).find("option:selected").attr("data-name")}),s.on("submit(layuiadmin-app-form-submit)",function(a){var i=a.field;i.businessName=e,r.req({url:n.baseUrl+"pplr/businesstarget/save",type:"post",data:i,success:function(e){console.log(e),layui.table.reload("pplr_targetListTab"),layer.close(t)}})})})}})}};a(".test-table-operate-btn .layui-btn").on("click",function(){var e=a(this).data("type");p[e]?p[e].call(this):""}),e("pplr_target",{})});