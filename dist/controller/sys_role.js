/** layuiAdmin.pro-v1.0.0 LPPL License By http://www.layui.com/admin/ */
 ;"use strict";function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}layui.define(["admin","table","setter","form","authtree","jquery"],function(e){var t,i=layui.jquery,l=layui.table,n=layui.admin,r=layui.setter,a=layui.view,o=layui.form,s=layui.authtree;o.render(null,"app-content-comment"),o.on("submit(LAY-app-contlist-search)",function(e){var t=e.field;console.log(t),l.reload("role_listTab",{where:t})}),l.render({elem:"#role_listTab",url:r.baseUrl+"sys/role/list",cols:[[{field:"roleId",minWidth:20,title:"ID",align:"center"},{field:"roleName",minWidth:80,title:"角色名称",align:"center"},{field:"remark",minWidth:100,title:"备注",align:"center"},{field:"createTime",minWidth:100,title:"创建时间",align:"center"},(t={width:190,align:"center"},_defineProperty(t,"align","center"),_defineProperty(t,"fixed","right"),_defineProperty(t,"toolbar","#role-table-operate-barDemo"),_defineProperty(t,"title","操作"),t)]],page:!0}),l.on("tool(role_listTab)",function(e){var t=e.data;console.log(t.roleId),"edit"===e.event?n.popup({title:"编辑角色",area:["550px","550px"],id:"LAY-popup-role-edit",btn:["提交","取消"],yes:function(e,t){i("#layuiadmin-app-form-submit").click()},end:function(){},success:function(e,l){a(this.id).render("infoManagement/roleformedit",t).done(function(){console.log(i("#rid").val()),n.req({url:r.baseUrl+"sys/role/info/"+i("#rid").val(),dataType:"json",success:function(e){s.setValue("#LAY-auth-tree-index",e.role.menuIdList)}}),o.on("submit(layuiadmin-app-form-submit)",function(e){var t=e.field;n.req({url:r.baseUrl+"/sys/role/update",type:"POST",data:t,success:function(e){layui.table.reload("role_listTab"),layer.close(l)}})})})}}):"del"===e.event&&layer.confirm("确定删除此角色？",function(e){n.req({url:r.baseUrl+"sys/role/delete",type:"POST",data:{roleIds:t.roleId},success:function(e){layui.table.reload("role_listTab"),layer.msg("已删除")}})})});var i=layui.$,u={role_add:function(e){clickTr={},n.popup({title:"添加角色",area:["550px","550px"],btn:["提交","取消"],yes:function(e,t){i("#layuiadmin-app-form-submit").click()},btn2:function(e,t){},end:function(){clickTr={}},id:"LAY-popup-role-add",success:function(e,t){a(this.id).render("infoManagement/roleformadd").done(function(){o.on("submit(layuiadmin-app-form-submit)",function(e){var i=e.field;n.req({url:r.baseUrl+"sys/role/save",type:"POST",data:i,success:function(e){console.log(e),layui.table.reload("role_listTab"),layer.close(t)}})})})}})}};i(".test-table-operate-btn .layui-btn").on("click",function(){var e=i(this).data("type");u[e]?u[e].call(this):""}),e("sys_role",{})});