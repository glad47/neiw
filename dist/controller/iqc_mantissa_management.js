/** layuiAdmin.pro-v1.0.0 LPPL License By http://www.layui.com/admin/ */
 ;"use strict";layui.define(["admin","table","index","element","form","laydate"],function(t){var a=layui.table,i=layui.view,e=layui.admin,n=layui.form,s=layui.laydate,l=layui.setter,d=(layui.element,layui.jquery);n.render(null,"iqc-mantissa-management-formlist"),s.render({elem:"#storageDate"}),s.render({elem:"#gmtModified"}),n.on("submit(LAY-iqc-mantissa-search)",function(t){var i=t.field;a.reload("LAY-iqc-mantissa-tab",{where:i})}),a.render({elem:"#LAY-iqc-mantissa-tab",url:l.baseUrl+"iqc/mantissa/list",cellMinWidth:80,id:"LAY-iqc-mantissa-tab",page:!0,parseData:function(t){return{code:0,data:t.page.list,count:t.page.totalCount}},cols:[[{type:"checkbox",fixed:"left"},{field:"productNo",title:"聚谷型号",fixed:"left",sort:!0},{field:"orderType",title:"订单类型",sort:!0},{field:"cycle",title:"周期",sort:!0},{field:"position",title:"摆放位置",width:280,sort:!0},{field:"quantity",title:"数量",sort:!0},{field:"unit",title:"单位",sort:!0},{field:"storageDate",title:"入库时间",templet:' <a>{{ layui.util.toDateString(d.storageDate,"yyyy-MM-dd") }}</a> ',sort:!0},{field:"gmtModified",title:"修改时间",sort:!0},{fixed:"right",title:"操作",toolbar:"#table-iqc-mantissa",width:110}]]}),a.on("tool(LAY-iqc-mantissa-tab)",function(t){var a=t.data;"edit"===t.event&&e.popup({title:"编辑尾数",area:["50%","50%"],id:"LAY-popup-iqc-mantissa-add",btn:["保存","取消"],yes:function(){d("#iqc-mantissa-sumbit").click()},success:function(t,s){i(this.id).render("productManagement/iframeWindow/mantissa_add_edit",a).done(function(){n.render(null,"iqc-mantissa-edit-add-form"),n.on("submit(LAY-iqc-mantissa-submit)",function(t){var a=t.field;e.req({type:"post",url:l.baseUrl+"iqc/mantissa/update",data:a,done:function(t){layer.msg("修改成功"),layui.table.reload("LAY-iqc-mantissa-tab")},fail:function(t){layer.msg("修改失败")}}),layer.close(s)})})}})});var r={add:function(){e.popup({title:"添加尾数",area:["50%","50%"],id:"LAY-popup-mantissa-add",btn:["保存","取消"],yes:function(){d("#iqc-mantissa-sumbit").click()},success:function(t,a){i(this.id).render("productManagement/iframeWindow/mantissa_add_edit").done(function(){n.render(null,"iqc-mantissa-edit-add-form"),n.on("submit(LAY-iqc-mantissa-submit)",function(t){var i=t.field;e.req({type:"post",url:l.baseUrl+"iqc/mantissa/save",data:i,done:function(t){layer.msg("添加成功"),layui.table.reload("LAY-iqc-mantissa-tab")},fail:function(t){layer.msg("添加失败")}}),layer.close(a)})})}})},batchdel:function(){var t=a.checkStatus("LAY-iqc-mantissa-tab"),i=t.data;if(0===i.length)return layer.msg("请选择数据");var n=t.data.map(function(t){return t.id}).join(",");layer.confirm("确定删除吗？",function(t){e.req({type:"post",url:l.baseUrl+"iqc/mantissa/delete",data:{ids:n},done:function(t){layer.msg("已删除"),a.reload("LAY-iqc-mantissa-tab")},fail:function(t){layer.msg("删除失败")}})})}};d(".layui-btn.layuiadmin-btn-useradmin").on("click",function(){var t=d(this).data("type");r[t]?r[t].call(this):""}),t("iqc_mantissa_management",{})});