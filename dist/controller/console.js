/** layuiAdmin.pro-v1.0.0 LPPL License By http://www.layui.com/admin/ */
 ;"use strict";function _defineProperty(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}layui.define(function(e){layui.use(["admin","carousel"],function(){var e=layui.$,a=(layui.admin,layui.carousel),t=layui.element,n=layui.device();e(".layadmin-carousel").each(function(){var t=e(this);a.render({elem:this,width:"100%",arrow:"none",interval:t.data("interval"),autoplay:t.data("autoplay")===!0,trigger:n.ios||n.android?"click":"hover",anim:t.data("anim")})}),t.render("progress")}),layui.use(["carousel","echarts","admin","formSelects","jsTools"],function(){function e(){var e=new Date;l=e.getFullYear(),d.req({type:"get",url:"../../start/json/pcbonline/date.js",success:function(e){var t=e.data;t.reverse(),t=t.reduce(function(e,a){var t;return t=a>=2018&&a<=l?e.concat(a):e},[]),console.log(t);for(var n="",i=0;i<t.length;i++)n+=l==t[i]?"<option value="+t[i]+" selected>"+t[i]+"</option>":"<option value="+t[i]+'">'+t[i]+"</option>";o("select[xm-select='currYears']").append(n),c.render(),a()}})}function a(){d.req({type:"get",data:{currYears:l},url:f.baseUrl+"allGraphs/monthlySales",success:function(e){var a=r(e.data,l),o=r(e.userData,l),s=n(e.data),u=i(e.data,l);t(a,u,o,s)}})}function t(e,t,n,i){var r=((new Date).getFullYear(),[]),d=[{title:{text:l+"年跟单员月销售额",x:"center",itemGap:10,textStyle:{fontSize:18},subtext:"单位（$）"},tooltip:{trigger:"axis"},legend:{padding:25,data:e.legendData},xAxis:[{type:"category",boundaryGap:!1,data:e.months}],yAxis:[{type:"value",axisLabel:{formatter:"$ {value}"}}],series:e.seriesData},{title:{text:l+"年每月总销售额",x:"center",itemGap:12,textStyle:{fontSize:18},subtext:"单位（$）"},tooltip:{trigger:"axis"},legend:{padding:25,data:["月销售额"]},calculable:!0,xAxis:[{type:"category",data:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]}],yAxis:[{type:"value"}],series:[{name:"月销售额",x:"center",type:"bar",data:i}]},{title:{text:l+"年跟单员月销售款数",x:"center",itemGap:12,textStyle:{fontSize:18},subtext:"单位（款）"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{padding:25,data:e.legendData},grid:{left:"3%",right:"4%",bottom:"3%"},xAxis:[{type:"category",data:e.months}],yAxis:[{type:"value"}],series:t},{title:{text:l+"年跟单员月客户数",x:"center",itemGap:12,textStyle:{fontSize:18},subtext:"单位（个）"},tooltip:{trigger:"axis"},legend:{padding:25,data:n.legendData},xAxis:[{type:"category",boundaryGap:!1,data:n.months}],yAxis:[{type:"value"}],series:n.seriesData}],c=o("#LAY-index-dataview").children("div"),f=function(e){r[e]=u.init(c[e],layui.echartsTheme),r[e].setOption(d[e]),window.onresize=r[e].resize};if(c[0]){f(0);var m=0;s.on("change(LAY-index-dataview)",function(e){f(m=e.index)}),layui.admin.on("side",function(){setTimeout(function(){f(m)},300)}),layui.admin.on("hash(tab)",function(){layui.router().path.join("")||f(m)}),layui.formSelects.on("currYears",function(e,t,n,i,r){l=n.value,a()})}}function n(e){var a=[0,0,0,0,0,0,0,0,0,0,0,0];return e.forEach(function(e){for(var t=e.data.length-1;t>=0;t--)a[t]=Math.round(100*a[t]+100*e.data[t])/100}),a}function i(e,a){var t=[],n=a,i=[],r=[],l=[{name:"一月",value:"01"},{name:"二月",value:"02"},{name:"三月",value:"03"},{name:"四月",value:"04"},{name:"五月",value:"05"},{name:"六月",value:"06"},{name:"七月",value:"07"},{name:"八月",value:"08"},{name:"九月",value:"09"},{name:"十月",value:"10"},{name:"十一月",value:"11"},{name:"十二月",value:"12"}];l.forEach(function(e){i.push(e.value),r.push(e.name)}),e.forEach(function(e){var a={},r=new Map;if(e.series.length)e.series.forEach(function(e){for(var a=0;a<i.length;a++)e.months!=n+i[a]?r.has(n+i[a])||r.set(n+i[a],0):r.set(e.months,e.orderNumber)});else for(var l=0;l<i.length;l++)r.set(n+i[l],0);var o=[];r.forEach(function(e,a){o.push(e)}),a.data=o,a.name=e.name,a.type="bar",a.stack="款数",t.push(a)});var o=[0,0,0,0,0,0,0,0,0,0,0,0],s={name:"总计",type:"bar",stack:"款数",label:{normal:_defineProperty({offset:["50","80"],show:!0,position:"insideBottom",formatter:"{c}",textStyle:{color:"#000"}},"formatter","")},itemStyle:{normal:{color:"rgba(128, 128, 128, 0)"}}};return t.forEach(function(e){for(var a=e.data.length-1;a>=0;a--)o[a]=o[a]+e.data[a]}),s.data=o,t.push(s),t}function r(e,a){var t={},n=a,i=[],r=[],l=[{name:"一月",value:"01"},{name:"二月",value:"02"},{name:"三月",value:"03"},{name:"四月",value:"04"},{name:"五月",value:"05"},{name:"六月",value:"06"},{name:"七月",value:"07"},{name:"八月",value:"08"},{name:"九月",value:"09"},{name:"十月",value:"10"},{name:"十一月",value:"11"},{name:"十二月",value:"12"}],o=[];return l.forEach(function(e){i.push(e.value),r.push(e.name)}),e.forEach(function(e){o.push(e.name);var a=new Map;if(e.series.length)e.series.forEach(function(e){for(var t=0;t<i.length;t++)e.months!=n+i[t]?a.has(n+i[t])||a.set(n+i[t],0):a.set(e.months,e.total)});else for(var t=0;t<i.length;t++)a.set(n+i[t],0);var r=[];a.forEach(function(e,a){r.push(e)}),e.data=r,e.type="line"}),t.seriesData=e,t.months=r,t.legendData=o,t}var l,o=layui.$,s=layui.carousel,u=layui.echarts,d=layui.admin,c=layui.formSelects,f=(layui.jsTools,layui.setter);e()}),layui.use("table",function(){var e=(layui.$,layui.table);e.render({elem:"#LAY-index-topSearch",url:"./json/console/top-search.js",page:!0,cols:[[{type:"numbers",fixed:"left"},{field:"keywords",title:"关键词",minWidth:300,templet:'<div><a href="https://www.baidu.com/s?wd={{ d.keywords }}" target="_blank" class="layui-table-link">{{ d.keywords }}</div>'},{field:"frequency",title:"搜索次数",minWidth:120,sort:!0},{field:"userNums",title:"用户数",sort:!0}]],skin:"line"}),e.render({elem:"#LAY-index-topCard",url:"./json/console/top-card.js",page:!0,cellMinWidth:120,cols:[[{type:"numbers",fixed:"left"},{field:"title",title:"标题",minWidth:300,templet:'<div><a href="{{ d.href }}" target="_blank" class="layui-table-link">{{ d.title }}</div>'},{field:"username",title:"发帖者"},{field:"channel",title:"类别"},{field:"crt",title:"点击率",sort:!0}]],skin:"line"})}),e("console",{})});