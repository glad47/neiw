/** layuiAdmin.pro-v1.0.0 LPPL License By http://www.layui.com/admin/ */
 ;"use strict";function _defineProperty(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}layui.define(function(e){layui.use(["admin","carousel"],function(){var e=layui.$,a=(layui.admin,layui.carousel),t=layui.element,n=layui.device();e(".layadmin-carousel").each(function(){var t=e(this);a.render({elem:this,width:"100%",arrow:"none",interval:t.data("interval"),autoplay:t.data("autoplay")===!0,trigger:n.ios||n.android?"click":"hover",anim:t.data("anim")})}),t.render("progress")}),layui.use(["carousel","echarts","admin","formSelects","jsTools","form","element"],function(){function e(){var e=new Date;o=e.getFullYear(),c.req({type:"get",url:"../../start/json/pcbonline/date.js",success:function(e){var t=e.data;t.reverse(),t=t.reduce(function(e,a){var t;return t=a>=2018&&a<=o?e.concat(a):e},[]);for(var n="",r=0;r<t.length;r++)n+=o==t[r]?"<option value="+t[r]+" selected>"+t[r]+"</option>":"<option value="+t[r]+'">'+t[r]+"</option>";l("select[xm-select='currYears']").append(n),d.render(),a()}})}function a(){c.req({type:"get",data:{currYears:o},url:m.baseUrl+"allGraphs/monthlySales",success:function(e){var a=i(e.data,o),l=i(e.userData,o),u=n(e.data),s=r(e.data,o),c=i(e.productSales,o);t(a,s,l,u,c)}})}function t(e,t,n,r,i){var c=[],d=[{title:{text:o+"年跟单员月销售额",x:"center",itemGap:10,textStyle:{fontSize:18},subtext:"单位（$）"},tooltip:{trigger:"axis"},legend:{padding:25,data:e.legendData},xAxis:[{type:"category",boundaryGap:!1,data:e.months}],yAxis:[{type:"value",axisLabel:{formatter:"$ {value}"}}],series:e.seriesData},{title:{text:o+"各种类型销售额",x:"center",itemGap:10,textStyle:{fontSize:18},subtext:"单位（$）"},tooltip:{trigger:"axis"},legend:{padding:25,data:i.legendData},xAxis:[{type:"category",boundaryGap:!1,data:i.months}],yAxis:[{type:"value",axisLabel:{formatter:"$ {value}"}}],series:i.seriesData},{title:{text:o+"年每月总销售额",x:"center",itemGap:12,textStyle:{fontSize:18},subtext:"单位（$）"},tooltip:{trigger:"axis"},legend:{padding:25,data:["月销售额"]},calculable:!0,xAxis:[{type:"category",data:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]}],yAxis:[{type:"value"}],series:[{name:"月销售额",x:"center",type:"bar",data:r}]},{title:{text:o+"年跟单员月销售款数",x:"center",itemGap:12,textStyle:{fontSize:18},subtext:"单位（款）"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{padding:25,data:e.legendData},grid:{left:"3%",right:"4%",bottom:"3%"},xAxis:[{type:"category",data:e.months}],yAxis:[{type:"value"}],series:t},{title:{text:o+"年跟单员月客户数",x:"center",itemGap:12,textStyle:{fontSize:18},subtext:"单位（个）"},tooltip:{trigger:"axis"},legend:{padding:25,data:n.legendData},xAxis:[{type:"category",boundaryGap:!1,data:n.months}],yAxis:[{type:"value"}],series:n.seriesData}],m=l("#LAY-index-dataview").children("div"),f=function(e){c[e]=s.init(m[e],layui.echartsTheme),c[e].setOption(d[e]),window.onresize=c[e].resize};if(m[0]){f(0);var v=0;u.on("change(LAY-index-dataview)",function(e){f(v=e.index)}),layui.admin.on("side",function(){setTimeout(function(){f(v)},300)}),layui.admin.on("hash(tab)",function(){layui.router().path.join("")||f(v)}),layui.formSelects.on("currYears",function(e,t,n,r,i){o=n.value,a()})}}function n(e){var a=[0,0,0,0,0,0,0,0,0,0,0,0];return e.forEach(function(e){for(var t=e.data.length-1;t>=0;t--)a[t]=Math.round(100*a[t]+100*e.data[t])/100}),a}function r(e,a){var t=[],n=a,r=[],i=[],o=[{name:"一月",value:"01"},{name:"二月",value:"02"},{name:"三月",value:"03"},{name:"四月",value:"04"},{name:"五月",value:"05"},{name:"六月",value:"06"},{name:"七月",value:"07"},{name:"八月",value:"08"},{name:"九月",value:"09"},{name:"十月",value:"10"},{name:"十一月",value:"11"},{name:"十二月",value:"12"}];o.forEach(function(e){r.push(e.value),i.push(e.name)}),e.forEach(function(e){var a={},i=new Map;if(e.series.length)e.series.forEach(function(e){for(var a=0;a<r.length;a++)e.months!=n+r[a]?i.has(n+r[a])||i.set(n+r[a],0):i.set(e.months,e.orderNumber)});else for(var o=0;o<r.length;o++)i.set(n+r[o],0);var l=[];i.forEach(function(e,a){l.push(e)}),a.data=l,a.name=e.name,a.type="bar",a.stack="款数",t.push(a)});var l=[0,0,0,0,0,0,0,0,0,0,0,0],u={name:"总计",type:"bar",stack:"款数",label:{normal:_defineProperty({offset:["50","80"],show:!0,position:"insideBottom",formatter:"{c}",textStyle:{color:"#000"}},"formatter","")},itemStyle:{normal:{color:"rgba(128, 128, 128, 0)"}}};return t.forEach(function(e){for(var a=e.data.length-1;a>=0;a--)l[a]=l[a]+e.data[a]}),u.data=l,t.push(u),t}function i(e,a){var t={},n=a,r=[],i=[],o=[{name:"一月",value:"01"},{name:"二月",value:"02"},{name:"三月",value:"03"},{name:"四月",value:"04"},{name:"五月",value:"05"},{name:"六月",value:"06"},{name:"七月",value:"07"},{name:"八月",value:"08"},{name:"九月",value:"09"},{name:"十月",value:"10"},{name:"十一月",value:"11"},{name:"十二月",value:"12"}],l=[];return o.forEach(function(e){r.push(e.value),i.push(e.name)}),e.forEach(function(e){l.push(e.name);var a=new Map;if(e.series.length)e.series.forEach(function(e){for(var t=0;t<r.length;t++)e.months!=n+r[t]?a.has(n+r[t])||a.set(n+r[t],0):a.set(e.months,e.total)});else for(var t=0;t<r.length;t++)a.set(n+r[t],0);var i=[];a.forEach(function(e,a){i.push(e)}),e.data=i,e.type="line"}),t.seriesData=e,t.months=i,t.legendData=l,t}var o,l=layui.$,u=layui.carousel,s=layui.echarts,c=layui.admin,d=layui.formSelects,m=(layui.jsTools,layui.form,layui.element,layui.setter);e()}),e("console",{})});