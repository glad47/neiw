/** layuiAdmin.pro-v1.0.0 LPPL License By http://www.layui.com/admin/ */
 ;"use strict";layui.define(function(e){layui.use(["admin","carousel"],function(){var e=layui.$,a=(layui.admin,layui.carousel),t=layui.element,i=layui.device();e(".layadmin-carousel").each(function(){var t=e(this);a.render({elem:this,width:"100%",arrow:"none",interval:t.data("interval"),autoplay:t.data("autoplay")===!0,trigger:i.ios||i.android?"click":"hover",anim:t.data("anim")})}),t.render("progress")}),layui.use(["carousel","echarts","admin"],function(){function e(e,a,l){var r=(new Date).getFullYear(),s=[],u=[{title:{text:r+"年跟单员月销售额",x:"left",textStyle:{fontSize:14}},tooltip:{trigger:"axis"},legend:{data:e.legendData},xAxis:[{type:"category",boundaryGap:!1,data:e.months}],yAxis:[{type:"value",axisLabel:{formatter:"$ {value}"}}],series:e.seriesData},{title:{text:"跟单员销售额分布图",x:"center",textStyle:{fontSize:14}},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : ${c} ({d}%)"},legend:{orient:"vertical",x:"left",data:e.legendData},series:[{name:"销售额",type:"pie",radius:"55%",center:["50%","50%"],data:a}]},{title:{text:r+"年跟单员月客户数",x:"left",textStyle:{fontSize:14}},tooltip:{trigger:"axis"},legend:{data:l.legendData},xAxis:[{type:"category",boundaryGap:!1,data:l.months}],yAxis:[{type:"value"}],series:l.seriesData}],o=t("#LAY-index-dataview").children("div"),d=function(e){s[e]=n.init(o[e],layui.echartsTheme),s[e].setOption(u[e]),window.onresize=s[e].resize};if(o[0]){d(0);var c=0;i.on("change(LAY-index-dataview)",function(e){d(c=e.index)}),layui.admin.on("side",function(){setTimeout(function(){d(c)},300)}),layui.admin.on("hash(tab)",function(){layui.router().path.join("")||d(c)})}}function a(e){var a={},t=(new Date).getFullYear(),i=[],n=[],l=[{name:"一月",value:"01"},{name:"二月",value:"02"},{name:"三月",value:"03"},{name:"四月",value:"04"},{name:"五月",value:"05"},{name:"六月",value:"06"},{name:"七月",value:"07"},{name:"八月",value:"08"},{name:"九月",value:"09"},{name:"十月",value:"10"},{name:"十月",value:"11"},{name:"十二月",value:"12"}],r=[];return l.forEach(function(e){i.push(e.value),n.push(e.name)}),e.forEach(function(e){r.push(e.name);var a=new Map;if(e.series.length)e.series.forEach(function(e){for(var n=0;n<i.length;n++)e.months!=t+i[n]?a.has(t+i[n])||a.set(t+i[n],0):a.set(e.months,e.total)});else for(var n=0;n<i.length;n++)a.set(t+i[n],0);var l=[];a.forEach(function(e,a){l.push(e)}),e.data=l,e.type="line"}),a.seriesData=e,a.months=n,a.legendData=r,a}var t=layui.$,i=layui.carousel,n=layui.echarts,l=layui.admin,r=layui.setter;l.req({type:"get",url:r.baseUrl+"graphs/monthlySales",success:function(t){var i=a(t.data),n=a(t.userData);e(i,t.pieOrder,n)}})}),layui.use("table",function(){var e=(layui.$,layui.table);e.render({elem:"#LAY-index-topSearch",url:"./json/console/top-search.js",page:!0,cols:[[{type:"numbers",fixed:"left"},{field:"keywords",title:"关键词",minWidth:300,templet:'<div><a href="https://www.baidu.com/s?wd={{ d.keywords }}" target="_blank" class="layui-table-link">{{ d.keywords }}</div>'},{field:"frequency",title:"搜索次数",minWidth:120,sort:!0},{field:"userNums",title:"用户数",sort:!0}]],skin:"line"}),e.render({elem:"#LAY-index-topCard",url:"./json/console/top-card.js",page:!0,cellMinWidth:120,cols:[[{type:"numbers",fixed:"left"},{field:"title",title:"标题",minWidth:300,templet:'<div><a href="{{ d.href }}" target="_blank" class="layui-table-link">{{ d.title }}</div>'},{field:"username",title:"发帖者"},{field:"channel",title:"类别"},{field:"crt",title:"点击率",sort:!0}]],skin:"line"})}),e("console",{})});