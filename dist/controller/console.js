/** layuiAdmin.pro-v1.0.0 LPPL License By http://www.layui.com/admin/ */
 ;"use strict";function _defineProperty(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}layui.define(function(e){layui.use(["admin","carousel"],function(){var e=layui.$,a=(layui.admin,layui.carousel),t=layui.element,n=layui.device();e(".layadmin-carousel").each(function(){var t=e(this);a.render({elem:this,width:"100%",arrow:"none",interval:t.data("interval"),autoplay:t.data("autoplay")===!0,trigger:n.ios||n.android?"click":"hover",anim:t.data("anim")})}),t.render("progress")}),layui.use(["carousel","echarts","admin"],function(){function e(e,a,t,n){var o=(new Date).getFullYear(),s=[],u=[{title:{text:o+"年跟单员月销售额",subtext:"单位（$）"},tooltip:{trigger:"axis"},legend:{data:e.legendData},xAxis:[{type:"category",boundaryGap:!1,data:e.months}],yAxis:[{type:"value",axisLabel:{formatter:"$ {value}"}}],series:e.seriesData},{title:{text:o+"年每月总销售额",subtext:"单位（$）"},tooltip:{trigger:"axis"},legend:{data:["月销售额"]},calculable:!0,xAxis:[{type:"category",data:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]}],yAxis:[{type:"value"}],series:[{name:"月销售额",type:"bar",data:n}]},{title:{text:o+"年跟单员月销售款数",subtext:"单位（款）"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:e.legendData},grid:{left:"3%",right:"4%",bottom:"3%"},xAxis:[{type:"category",data:e.months}],yAxis:[{type:"value"}],series:a},{title:{text:o+"年跟单员月客户数",subtext:"单位（个）"},tooltip:{trigger:"axis"},legend:{data:t.legendData},xAxis:[{type:"category",boundaryGap:!1,data:t.months}],yAxis:[{type:"value"}],series:t.seriesData}],d=i("#LAY-index-dataview").children("div"),c=function(e){s[e]=r.init(d[e],layui.echartsTheme),s[e].setOption(u[e]),window.onresize=s[e].resize};if(d[0]){c(0);var m=0;l.on("change(LAY-index-dataview)",function(e){c(m=e.index)}),layui.admin.on("side",function(){setTimeout(function(){c(m)},300)}),layui.admin.on("hash(tab)",function(){layui.router().path.join("")||c(m)})}}function a(e){var a=[0,0,0,0,0,0,0,0,0,0,0,0];return e.forEach(function(e){for(var t=e.data.length-1;t>=0;t--)a[t]=Math.round(100*a[t]+100*e.data[t])/100}),a}function t(e){var a=[],t=(new Date).getFullYear(),n=[],i=[],l=[{name:"一月",value:"01"},{name:"二月",value:"02"},{name:"三月",value:"03"},{name:"四月",value:"04"},{name:"五月",value:"05"},{name:"六月",value:"06"},{name:"七月",value:"07"},{name:"八月",value:"08"},{name:"九月",value:"09"},{name:"十月",value:"10"},{name:"十月",value:"11"},{name:"十二月",value:"12"}];l.forEach(function(e){n.push(e.value),i.push(e.name)}),e.forEach(function(e){var i={},l=new Map;if(e.series.length)e.series.forEach(function(e){for(var a=0;a<n.length;a++)e.months!=t+n[a]?l.has(t+n[a])||l.set(t+n[a],0):l.set(e.months,e.orderNumber)});else for(var r=0;r<n.length;r++)l.set(t+n[r],0);var o=[];l.forEach(function(e,a){o.push(e)}),i.data=o,i.name=e.name,i.type="bar",i.stack="款数",a.push(i)});var r=[0,0,0,0,0,0,0,0,0,0,0,0],o={name:"总计",type:"bar",stack:"款数",label:{normal:_defineProperty({offset:["50","80"],show:!0,position:"insideBottom",formatter:"{c}",textStyle:{color:"#000"}},"formatter","")},itemStyle:{normal:{color:"rgba(128, 128, 128, 0)"}}};return a.forEach(function(e){for(var a=e.data.length-1;a>=0;a--)r[a]=r[a]+e.data[a]}),o.data=r,a.push(o),a}function n(e,a){var t={},n=(new Date).getFullYear(),i=[],l=[],r=[{name:"一月",value:"01"},{name:"二月",value:"02"},{name:"三月",value:"03"},{name:"四月",value:"04"},{name:"五月",value:"05"},{name:"六月",value:"06"},{name:"七月",value:"07"},{name:"八月",value:"08"},{name:"九月",value:"09"},{name:"十月",value:"10"},{name:"十月",value:"11"},{name:"十二月",value:"12"}],o=[];return r.forEach(function(e){i.push(e.value),l.push(e.name)}),e.forEach(function(e){o.push(e.name);var a=new Map;if(e.series.length)e.series.forEach(function(e){for(var t=0;t<i.length;t++)e.months!=n+i[t]?a.has(n+i[t])||a.set(n+i[t],0):a.set(e.months,e.total)});else for(var t=0;t<i.length;t++)a.set(n+i[t],0);var l=[];a.forEach(function(e,a){l.push(e)}),e.data=l,e.type="line"}),t.seriesData=e,t.months=l,t.legendData=o,t}var i=layui.$,l=layui.carousel,r=layui.echarts,o=layui.admin,s=layui.setter;o.req({type:"get",url:s.baseUrl+"allGraphs/monthlySales",success:function(i){var l=n(i.data),r=n(i.userData),o=a(i.data),s=t(i.data);console.log(s),e(l,s,r,o)}})}),layui.use("table",function(){var e=(layui.$,layui.table);e.render({elem:"#LAY-index-topSearch",url:"./json/console/top-search.js",page:!0,cols:[[{type:"numbers",fixed:"left"},{field:"keywords",title:"关键词",minWidth:300,templet:'<div><a href="https://www.baidu.com/s?wd={{ d.keywords }}" target="_blank" class="layui-table-link">{{ d.keywords }}</div>'},{field:"frequency",title:"搜索次数",minWidth:120,sort:!0},{field:"userNums",title:"用户数",sort:!0}]],skin:"line"}),e.render({elem:"#LAY-index-topCard",url:"./json/console/top-card.js",page:!0,cellMinWidth:120,cols:[[{type:"numbers",fixed:"left"},{field:"title",title:"标题",minWidth:300,templet:'<div><a href="{{ d.href }}" target="_blank" class="layui-table-link">{{ d.title }}</div>'},{field:"username",title:"发帖者"},{field:"channel",title:"类别"},{field:"crt",title:"点击率",sort:!0}]],skin:"line"})}),e("console",{})});