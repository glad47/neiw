<title>添加/修改菜单</title>
<script type="text/html" template>
    <input type="text" name="addMenu_sign" value="{{ d.params.type}}" style="display: none"/>
</script>

<div class="layui-fluid">
    <form class="layui-form" lay-filter="user_menuAdd_form" id="user_menuAdd_form" style="width: 650px">
        <div class="layui-tab layui-tab-brief" lay-filter="docDemoTabBrief">
            <ul class="layui-tab-title">
                <li id="menuAdd_tabDir">目录</li>
                <li id="menuAdd_tabMenu">菜单</li>
                <li id="menuAdd_tabBtn">按钮</li>
            </ul>
            <div class="layui-tab-content">
                <!--目录-->
                <div class="layui-tab-item layui-show">
                    <div class="layui-form-item">
                        <div class="layui-col-md12">
                            <label class="layui-form-label"><span class="mandatory">*</span>目录名称：</label>
                            <div class="layui-input-block">
                                <script type="text/html" template>
                                    <input type="text" name="menuAdd_name" value="{{ d.params.title || '' }}" autocomplete="off" class="layui-input" id="menuAdd_dirname">
                                </script>
                            </div>
                        </div>
                    </div>

                    <div class="layui-form-item">
                        <div class="layui-col-md12">
                            <label class="layui-form-label"><span class="mandatory">*</span>上级菜单：</label>
                            <div class="layui-input-block">
                                <script type="text/html" template lay-url="http://192.168.0.155:8080/renren-fast/sys/menu/erpselect" lay-done="layui.data.done(d);">
                                    <select name="menuAdd_menuup" id="menuAdd_menuup">
                                        {{#  layui.each(d.menuList, function(index, item){ }}
                                        <option>{{ item.title }}</option>
                                        {{#  }); }}
                                        {{#  if(d.menuList.length === 0){ }}
                                        无数据
                                        {{#  } }}
                                    </select>
                                </script>
                            </div>
                        </div>
                    </div>

                    <div class="layui-form-item">
                        <div class="layui-col-md6">
                            <label class="layui-form-label">排序号：</label>
                            <div class="layui-input-block">
                                <script type="text/html" template>
                                    <input type="number" name="orderNum" value="{{ d.params.orderNum || '' }}" autocomplete="off" class="layui-input" id="menuAdd_ordernum">
                                </script>
                            </div>
                        </div>
                        <div class="layui-col-md6">
                            <label class="layui-form-label">菜单图标：</label>
                            <div class="layui-input-block">
                                <script type="text/html" template>
                                    <input type="text" name="menuAdd_icon" value="{{ d.params.icon || '' }}" autocomplete="off" class="layui-input" id="menuAdd_icon">
                                </script>
                            </div>
                        </div>
                    </div>
                </div>
                <!--菜单-->
                <div class="layui-tab-item">
                    <div class="layui-form-item">
                        <div class="layui-col-md12">
                            <label class="layui-form-label"><span class="mandatory">*</span>菜单名称：</label>
                            <div class="layui-input-block">
                                <input type="text" name="menuAdd_name" autocomplete="off" class="layui-input" id="menuAdd_name">
                            </div>
                        </div>
                    </div>

                    <div class="layui-form-item">
                        <div class="layui-col-md12">
                            <label class="layui-form-label"><span class="mandatory">*</span>上级菜单：</label>
                            <div class="layui-input-block">
                                <script type="text/html" template lay-url="http://192.168.0.155:8080/renren-fast/sys/menu/erpselect" lay-done="layui.data.done(d);">
                                    <select name="menuAdd_menuup" id="menuAdd_menuup">
                                        {{#  layui.each(d.menuList, function(index, item){ }}
                                        <option>{{ item.title }}</option>
                                        {{#  }); }}
                                        {{#  if(d.menuList.length === 0){ }}
                                        无数据
                                        {{#  } }}
                                    </select>
                                </script>
                            </div>
                        </div>
                    </div>

                    <div class="layui-form-item">
                        <div class="layui-col-md12">
                            <label class="layui-form-label">菜单URL：</label>
                            <div class="layui-input-block">
                                <input type="text" name="jump" autocomplete="off" class="layui-input" id="menuAdd_jump">
                            </div>
                        </div>
                    </div>

                    <div class="layui-form-item">
                        <div class="layui-col-md">
                            <label class="layui-form-label">授权标识：</label>
                            <div class="layui-input-block">
                                <input type="text" name="permissions" autocomplete="off" class="layui-input" id="menuAdd_permissions">
                            </div>
                        </div>
                    </div>

                    <div class="layui-form-item">
                        <div class="layui-col-md6">
                            <label class="layui-form-label">排序号：</label>
                            <div class="layui-input-block">
                                <input type="number" name="orderNum" autocomplete="off" class="layui-input" id="menuAdd_otrdernum">
                            </div>
                        </div>
                        <div class="layui-col-md6">
                            <label class="layui-form-label">菜单图标：</label>
                            <div class="layui-input-block">
                                <input type="text" name="menuAdd_icon" autocomplete="off" class="layui-input" id="menuAdd_ticon">
                            </div>
                        </div>
                    </div>
                </div>

                <!--按钮-->
                <div class="layui-tab-item">
                    <div class="layui-form-item">
                        <div class="layui-col-md">
                            <label class="layui-form-label"><span class="mandatory">*</span>按钮名称：</label>
                            <div class="layui-input-block">
                                <input type="text" name="btn-name" autocomplete="off" class="layui-input" id="menuAdd_btn">
                            </div>
                        </div>
                    </div>

                    <div class="layui-form-item">
                        <div class="layui-col-md12">
                            <label class="layui-form-label"><span class="mandatory">*</span>上级菜单：</label>
                            <div class="layui-input-block">
                                <script type="text/html" template lay-url="http://192.168.0.155:8080/renren-fast/sys/menu/erpselect" lay-done="layui.data.done(d);">
                                    <select name="menuAdd_menuup" id="menuAdd_thmenuup">
                                        {{#  layui.each(d.menuList, function(index, item){ }}
                                        <option>{{ item.title }}</option>
                                        {{#  }); }}
                                        {{#  if(d.menuList.length === 0){ }}
                                        无数据
                                        {{#  } }}
                                    </select>
                                </script>
                            </div>
                        </div>
                    </div>

                    <div class="layui-form-item">
                        <div class="layui-col-md">
                            <label class="layui-form-label">授权标识：</label>
                            <div class="layui-input-block">
                                <input type="text" name="permissions" autocomplete="off" class="layui-input" id="menuAdd_thpermissions">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <div class="layui-form-item layui-col-md-offset2">
            <div class="layui-input-block">
                <button class="layui-btn" lay-submit lay-filter="LAY-menu-add-submit">立即提交</button>
                <button type="reset" class="layui-btn layui-btn-primary">重置</button>
            </div>
        </div>


    </form>
</div>
<style>
    .mandatory{color: red;}
</style>

<script>
    layui.data.done = function(d){
        layui.use(['form'], function(){
            var $ = layui.$
            var form = layui.form;
            form.render(null, 'user_menuAdd_form'); //渲染该模板下的动态表单

            //jquery事件
            //判断编辑菜单的类型start
            var addMenu_sign = $("input[name='addMenu_sign']").val();
            if (addMenu_sign == "0"){
                $(".layui-tab .layui-tab-title #menuAdd_tabDir").addClass("layui-this");
            } else if (addMenu_sign == "1"){
                $(".layui-tab .layui-tab-title #menuAdd_tabMenu").addClass("layui-this");
            } else if (addMenu_sign == "2"){
                $(".layui-tab .layui-tab-title #menuAdd_tabBtn").addClass("layui-this");
            }
            //判断编辑菜单的类型end
        });
    };
</script>
