<div class="layui-fluid">
    <script type="text/html" template lay-done="layui.data.done(d);">
        <table class="layui-table" id="supplierOrderTab" lay-filter="supplierOrderTab" style="width: 100%;"></table>
        {{ d.params.type }}
    </script>
</div>

 <script type="text/html" id="supplierOrder_tabbar">
     <a class="layui-btn layui-btn-normal layui-btn-xs" lay-event="edit">修改</a>
     <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>
 </script>
<script>
    layui.data.done = function (d) {
        var popType = d.params.type;
        var tabToolbar;
        var tabToolbarHHide;
        if (popType == 'marketPert') {
            tabToolbar = '#supplierOrder_tabbar';
            tabToolbarHHide = false;
        } else {
            tabToolbar = '';
            tabToolbarHHide = true;
        }
        layui.use(['admin', 'table', 'setter', 'form', 'jquery'], function () {
            table = layui.table
            ,setter = layui.setter
            table.render({
                elem: '#supplierOrderTab'
                ,url: setter.baseUrl+'pert/supplierquote/list'
                ,id: "supplierOrderTab"
                ,page: true
                ,parseData: function (res) {
                    return{
                        "code": 0,
                        "data": res.page.list,
                        "count": res.page.totalCount
                    }
                }
                ,cols: [[
                    ,{field: 'boardFee',title: '板费', Width: 110}
                    ,{field: 'engineeringFee',title: '工程费', Width: 110}
                    ,{field: 'overworkFee',title: '加急费', Width: 110}
                    ,{field: 'postFee',title: '邮费', Width: 110}
                    ,{field: 'testCostFee',title: '测试费', Width: 110}
                    ,{field: 'toolingFee',title: '工具费', Width: 110}
                    ,{field: 'unitPrice',title: '单价', Width: 110}
                    ,{field: '',title: '操作', Width: 210, toolbar: tabToolbar,hide:tabToolbarHHide}
                    ,{field: 'id',title: 'ID', hide: true}
                ]]
                ,done: function (res, curr, count) {

                }
            });

            form.on('tool(supplierOrderTab)', function (obj) {
                var data = obj.data;
                if (obj.even == 'del') {
                    layer.confirm('确定要删除这条报价？', function (layero, index) {
                        admin.req({
                            type: 'post',
                            data: '',
                            url: setter.baseUrl + '',
                            success: function () {
                                layer.close(index);
                                layer.msg('删除成功');
                                table.reload('supplierOrderTab');
                            }
                        });

                    });
                } 
            });
        });
    }
</script>

<style>
    .layui-table{width: 100% !important;}
</style>